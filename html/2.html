
import React, { useState, useEffect, useRef } from 'react';
import { HashRouter, Routes, Route, Link, useLocation, useParams } from 'react-router-dom';
import { Github, FileText, ChevronDown, Menu, X, ArrowRight, Twitter, Linkedin, MessageCircle, Info, Sparkles, Zap, Cpu } from 'lucide-react';
import { PAGES_CONTENT } from './constants';

// --- Components ---

const Button = ({ children, variant = 'primary', className = '', ...props }: any) => {
  const baseStyle = "px-6 py-2.5 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2";
  const variants = {
    primary: "bg-brand-gold text-black hover:bg-white hover:scale-105",
    secondary: "bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm",
    outline: "border border-gray-600 text-gray-300 hover:border-brand-gold hover:text-brand-gold",
    ghost: "text-gray-400 hover:text-brand-gold"
  };
  return (
    <button className={`${baseStyle} ${variants[variant as keyof typeof variants]} ${className}`} {...props}>
      {children}
    </button>
  );
};

const Logo = () => (
  <Link to="/" className="flex items-center gap-2 group">
    <div className="relative w-10 h-10 flex items-center justify-center">
      <div className="absolute inset-0 border-2 border-brand-gold rounded-full opacity-80 group-hover:scale-110 transition-transform"></div>
      <div className="absolute w-2 h-2 bg-brand-gold rounded-full top-0"></div>
      <div className="absolute w-2 h-2 bg-brand-gold rounded-full bottom-0 left-1"></div>
      <div className="absolute w-2 h-2 bg-brand-gold rounded-full bottom-0 right-1"></div>
      <span className="font-bold text-brand-gold text-xs z-10">AIL2</span>
    </div>
    <span className="font-bold text-xl tracking-tight hidden sm:block">AIL2</span>
  </Link>
);

const Navbar = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [showLearn, setShowLearn] = useState(false);
  const location = useLocation();
  const learnRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    setIsOpen(false);
    setShowLearn(false);
  }, [location]);

  return (
    <nav className="fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/5 h-20 flex items-center">
      <div className="container mx-auto px-6 flex items-center justify-between">
        {/* Left Links */}
        <div className="hidden md:flex items-center gap-8">
          <Link to="/research" className="text-gray-300 hover:text-brand-gold text-sm font-medium transition-colors">Research</Link>
          <Link to="/ecosystem-fund" className="text-gray-300 hover:text-brand-gold text-sm font-medium transition-colors">Ecosystem Fund</Link>
          <div 
            className="relative"
            onMouseEnter={() => setShowLearn(true)}
            onMouseLeave={() => setShowLearn(false)}
          >
            <button className="flex items-center gap-1 text-gray-300 hover:text-brand-gold text-sm font-medium transition-colors h-20 outline-none">
              Learn <ChevronDown size={14} className={`transition-transform duration-200 ${showLearn ? 'rotate-180' : ''}`} />
            </button>
            {showLearn && (
              <div className="absolute top-20 left-0 w-64 bg-neutral-900 border border-gray-800 rounded-2xl shadow-2xl p-4 animate-in fade-in slide-in-from-top-2 duration-200">
                <div className="space-y-1">
                   <Link to="/ail2-core" className="flex items-center gap-3 p-3 hover:bg-white/5 rounded-xl transition-colors group">
                      <Zap className="text-brand-gold" size={18}/>
                      <div><div className="text-sm font-bold text-white group-hover:text-brand-gold">AIL2 Core</div><div className="text-[10px] text-gray-500">Execution Layer</div></div>
                   </Link>
                   <Link to="/ail2-builder" className="flex items-center gap-3 p-3 hover:bg-white/5 rounded-xl transition-colors group">
                      <Cpu className="text-brand-gold" size={18}/>
                      <div><div className="text-sm font-bold text-white group-hover:text-brand-gold">AIL2 Builder</div><div className="text-[10px] text-gray-500">Model Launchpad</div></div>
                   </Link>
                   <Link to="/ail2-creator" className="flex items-center gap-3 p-3 hover:bg-white/5 rounded-xl transition-colors group">
                      <Sparkles className="text-brand-gold" size={18}/>
                      <div><div className="text-sm font-bold text-white group-hover:text-brand-gold">AIL2 Creator</div><div className="text-[10px] text-gray-500">Agent Studio</div></div>
                   </Link>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Center Logo */}
        <div className="absolute left-1/2 transform -translate-x-1/2">
           <Logo />
        </div>

        {/* Right Actions */}
        <div className="hidden md:flex items-center gap-4">
          <Link to="/blog" className="text-gray-300 hover:text-brand-gold text-sm font-medium transition-colors mr-4">Blog</Link>
          <a href="https://github.com" target="_blank" className="p-2 bg-brand-panel rounded-lg border border-gray-800 text-brand-gold hover:border-brand-gold transition-colors">
            <Github size={18} />
          </a>
          <Link to="/docs" className="p-2 bg-brand-panel rounded-lg border border-gray-800 text-gray-300 hover:text-brand-gold hover:border-brand-gold transition-colors">
            <FileText size={18} />
          </Link>
          <button className="flex items-center gap-2 px-3 py-2 bg-brand-panel rounded-lg border border-gray-800 text-gray-300 text-xs hover:border-gray-600 transition-colors">
             GB/English <ChevronDown size={12} />
          </button>
        </div>

        {/* Mobile Toggle */}
        <button onClick={() => setIsOpen(!isOpen)} className="md:hidden text-white p-2">
          {isOpen ? <X /> : <Menu />}
        </button>
      </div>

      {/* Mobile Menu */}
      {isOpen && (
        <div className="absolute top-20 left-0 right-0 bg-neutral-900 border-b border-gray-800 p-6 flex flex-col gap-6 md:hidden animate-in slide-in-from-top-2">
          <div className="grid grid-cols-2 gap-4">
             <Link to="/ail2-core" className="p-4 bg-black rounded-xl border border-gray-800 text-sm font-bold">AIL2 Core</Link>
             <Link to="/ail2-builder" className="p-4 bg-black rounded-xl border border-gray-800 text-sm font-bold">AIL2 Builder</Link>
             <Link to="/ail2-creator" className="p-4 bg-black rounded-xl border border-gray-800 text-sm font-bold">AIL2 Creator</Link>
             <Link to="/ecosystem-fund" className="p-4 bg-black rounded-xl border border-gray-800 text-sm font-bold">Fund</Link>
          </div>
          <Link to="/research" className="text-lg text-gray-300 border-b border-gray-800 pb-2">Research</Link>
          <Link to="/blog" className="text-lg text-gray-300 border-b border-gray-800 pb-2">Blog</Link>
          <Link to="/docs" className="text-lg text-gray-300 border-b border-gray-800 pb-2">Docs</Link>
        </div>
      )}
    </nav>
  );
};

const Footer = () => {
  return (
    <footer className="bg-black py-20 border-t border-white/5">
      <div className="container mx-auto px-6">
        <div className="bg-brand-panel rounded-3xl p-8 md:p-16 border border-brand-border flex flex-col lg:flex-row gap-12 lg:gap-24 relative overflow-hidden">
           <div className="absolute top-0 right-0 w-64 h-64 bg-brand-gold/5 blur-[100px] rounded-full pointer-events-none"></div>

           <div className="flex-1 space-y-6 z-10">
              <h3 className="text-3xl font-bold">Sign up for our<br/>newsletter</h3>
              <div className="flex flex-col sm:flex-row gap-2 bg-black/50 p-2 rounded-xl border border-gray-800 max-w-md">
                 <input type="email" placeholder="Your email" className="bg-transparent px-4 py-3 text-white outline-none flex-grow placeholder-gray-600" />
                 <Button className="shrink-0">Subscribe</Button>
              </div>
           </div>

           <div className="flex-1 grid grid-cols-2 md:grid-cols-3 gap-8 z-10">
              <div className="space-y-4">
                 <h4 className="text-brand-gold font-bold mb-2">Product</h4>
                 <ul className="space-y-3">
                    <li><Link to="/ail2-core" className="text-gray-400 hover:text-white transition-colors">AIL2 Core</Link></li>
                    <li><Link to="/ail2-builder" className="text-gray-400 hover:text-white transition-colors">AIL2 Builder</Link></li>
                    <li><Link to="/ail2-creator" className="text-gray-400 hover:text-white transition-colors">AIL2 Creator</Link></li>
                 </ul>
              </div>
              <div className="space-y-4">
                 <h4 className="text-brand-gold font-bold mb-2">Resources</h4>
                 <ul className="space-y-3">
                    <li><Link to="/docs" className="text-gray-400 hover:text-white transition-colors">Docs</Link></li>
                    <li><Link to="/blog" className="text-gray-400 hover:text-white transition-colors">Blog</Link></li>
                    <li><Link to="/research" className="text-gray-400 hover:text-white transition-colors">Research</Link></li>
                 </ul>
              </div>
              <div className="space-y-4">
                 <h4 className="text-brand-gold font-bold mb-2">Ecosystem</h4>
                 <ul className="space-y-3">
                    <li><Link to="/incubator" className="text-gray-400 hover:text-white transition-colors">Incubator</Link></li>
                    <li><Link to="/contact-us" className="text-gray-400 hover:text-white transition-colors">Contact Us</Link></li>
                    <li><Link to="/ecosystem-fund" className="text-gray-400 hover:text-white transition-colors">Ecosystem Fund</Link></li>
                 </ul>
              </div>
           </div>
        </div>

        <div className="mt-12 flex flex-col md:flex-row justify-between items-center text-sm text-gray-500">
           <p>Â©2025 AIL2. All rights reserved.</p>
           <div className="flex items-center gap-6 mt-4 md:mt-0">
              <span className="text-brand-gold">Socials</span>
              <div className="flex gap-4">
                <a href="#" className="hover:text-white transition-colors"><Twitter size={20} /></a>
                <a href="#" className="hover:text-white transition-colors"><Linkedin size={20} /></a>
                <a href="#" className="hover:text-white transition-colors"><MessageCircle size={20} /></a>
              </div>
           </div>
        </div>
      </div>
    </footer>
  );
};

// --- Pages ---

const HomePage = () => {
  const [activeTab, setActiveTab] = useState(0);
  const features = [
    { title: "Endless scalability", desc: "Scalability without limits, enabling AI and Web3 applications to achieve unrestricted growth.", img: "https://picsum.photos/1200/800?random=1" },
    { title: "GPU Driver", desc: "GPU miners deploy AI models, developers don't need to manage or maintain them.", img: "https://picsum.photos/1200/800?random=2" },
    { title: "Fluid Composability", desc: "Developers can integrate effortlessly to build, link, and scale AI-powered Web3 applications with ease.", img: "https://picsum.photos/1200/800?random=3" }
  ];

  return (
    <div className="bg-black min-h-screen">
      <section className="pt-40 pb-20 container mx-auto px-6 text-center relative">
        <h1 className="text-6xl md:text-9xl font-black mb-10 tracking-tighter leading-none">
          The Largest AIL2 for
        </h1>
        <div className="flex justify-center items-center gap-6 mt-12 flex-wrap opacity-50 grayscale hover:grayscale-0 transition-all duration-500">
          <div className="w-16 h-16 bg-neutral-900 border border-gray-800 rounded-2xl flex items-center justify-center hover:border-brand-gold cursor-pointer"><span className="font-bold text-xs">ETH</span></div>
          <div className="w-20 h-20 border-2 border-brand-gold bg-yellow-900/20 rounded-2xl flex items-center justify-center text-brand-gold shadow-[0_0_20px_rgba(212,175,55,0.3)] transform scale-110"><span className="font-bold text-xl">BSC</span></div>
          <div className="w-16 h-16 bg-neutral-900 border border-gray-800 rounded-2xl flex items-center justify-center hover:border-brand-gold cursor-pointer"><span className="font-bold text-xs">SOL</span></div>
          <div className="w-16 h-16 bg-neutral-900 border border-gray-800 rounded-2xl flex items-center justify-center hover:border-brand-gold cursor-pointer"><span className="font-bold text-xs">APT</span></div>
          <div className="w-16 h-16 bg-neutral-900 border border-gray-800 rounded-2xl flex items-center justify-center hover:border-brand-gold cursor-pointer"><span className="font-bold text-xs">POL</span></div>
        </div>
        <div className="absolute bottom-0 left-1/2 -translate-x-1/2 w-3/4 h-32 bg-brand-gold/10 blur-[100px]"></div>
      </section>

      <section className="py-24 relative overflow-hidden">
        <div className="container mx-auto px-6 relative z-10">
          <div className="bg-brand-panel border border-brand-border rounded-[48px] p-12 md:p-24 relative overflow-hidden flex flex-col md:flex-row items-center gap-16">
            <div className="flex-1 z-10">
               <div className="flex items-center gap-3 mb-8"><Logo /></div> 
               <h2 className="text-4xl md:text-6xl font-black leading-tight mb-8">
                 Accelerate Decentralized AI Development <span className="text-brand-gold">100x</span>
               </h2>
               <p className="text-lg text-gray-400 mb-10 max-w-lg leading-relaxed">
                 AI models run fully decentralized, with infinite scalability, empowering developers to accelerate decentralized AI application development across ETH, BSC, Base, and Mantle.
               </p>
               <Button className="text-lg px-10 py-5">Launch Your Project</Button>
            </div>
            <div className="flex-1 relative h-96 w-full flex items-center justify-center">
               <div className="relative w-80 h-80">
                  <div className="absolute inset-0 m-auto w-20 h-20 bg-brand-gold rounded-3xl shadow-[0_0_50px_rgba(212,175,55,0.4)] z-20 flex items-center justify-center"><Zap size={40} className="text-black"/></div>
                  {[0, 60, 120, 180, 240, 300].map((deg, i) => (
                    <div key={i} className="absolute inset-0 m-auto w-full h-full" style={{ transform: `rotate(${deg}deg)` }}>
                       <div className="absolute -top-12 left-1/2 -translate-x-1/2 text-brand-gold/10 font-black text-5xl" style={{ transform: `rotate(-${deg}deg)` }}>100x</div>
                       <div className="absolute top-0 left-1/2 -translate-x-1/2 w-px h-16 bg-gradient-to-b from-brand-gold/50 to-transparent"></div>
                    </div>
                  ))}
                  <div className="absolute inset-0 m-auto w-full h-full rounded-full border border-brand-gold/20 animate-spin-slow"></div>
               </div>
            </div>
          </div>
        </div>
      </section>

      <section className="py-32 container mx-auto px-6">
        <div className="mb-20">
          <h2 className="text-4xl md:text-7xl font-black max-w-3xl leading-[1.1]">
            The largest community-driven ecosystem for <span className="text-brand-gold">AI apps.</span>
          </h2>
        </div>

        <div className="flex flex-col lg:flex-row gap-20">
          <div className="lg:w-1/3 flex flex-col justify-center space-y-16 relative pl-12 border-l border-white/5">
            <div className="absolute left-[-2px] w-1 bg-brand-gold shadow-[0_0_15px_#D4AF37] transition-all duration-500 rounded-full" 
                 style={{ top: `${activeTab * 33}%`, height: '25%' }}></div>
            {features.map((f, i) => (
              <div key={i} className={`cursor-pointer transition-all duration-300 ${activeTab === i ? 'opacity-100 scale-105' : 'opacity-30 hover:opacity-50'}`} onClick={() => setActiveTab(i)}>
                <h3 className={`text-3xl font-black mb-4 ${activeTab === i ? 'text-brand-gold' : 'text-white'}`}>{f.title}</h3>
                <p className="text-gray-400 text-lg leading-relaxed">{f.desc}</p>
              </div>
            ))}
          </div>
          <div className="lg:w-2/3 h-[600px] rounded-[48px] overflow-hidden relative group border border-white/5">
             <img src={features[activeTab].img} alt={features[activeTab].title} className="w-full h-full object-cover transition-all duration-1000 group-hover:scale-105" />
             <div className="absolute inset-0 bg-gradient-to-r from-black via-black/20 to-transparent"></div>
          </div>
        </div>
      </section>
    </div>
  );
};

const GenericPage = () => {
  const { slug } = useParams();
  const pageId = slug || 'ail2-core'; 
  const data = PAGES_CONTENT[pageId];

  useEffect(() => {
    window.scrollTo(0, 0);
  }, [slug]);

  if (!data) {
    return (
      <div className="min-h-screen bg-black flex items-center justify-center text-white pt-20">
        <div className="text-center">
            <h1 className="text-9xl font-black text-brand-gold mb-4 opacity-10">404</h1>
            <p className="text-gray-400 text-xl">We can't find that page.</p>
            <Link to="/" className="mt-12 inline-block px-10 py-4 bg-brand-gold text-black font-bold rounded-xl hover:bg-white transition-all">Return Home</Link>
        </div>
      </div>
    );
  }

  return (
    <div className="bg-black min-h-screen pt-40 pb-32">
      <div className="container mx-auto px-6">
        <div className="mb-24 max-w-4xl">
           <div className="text-brand-gold font-bold mb-6 uppercase tracking-[0.2em] text-sm flex items-center gap-3">
             <div className="w-12 h-px bg-brand-gold"></div>
             {data.category}
           </div>
           <h1 className="text-6xl md:text-8xl font-black mb-8 leading-tight tracking-tighter">{data.title}</h1>
           <p className="text-2xl text-gray-400 max-w-3xl leading-relaxed">{data.subtitle}</p>
        </div>
        <div className="animate-in fade-in slide-in-from-bottom-8 duration-700 ease-out">
           {data.content}
        </div>
      </div>
    </div>
  );
};

// --- Layout Wrapper ---

const Layout = ({ children }: { children?: React.ReactNode }) => {
  return (
    <div className="bg-black text-white min-h-screen font-sans selection:bg-brand-gold selection:text-black antialiased">
      <Navbar />
      <main>{children}</main>
      <Footer />
    </div>
  );
};

// --- App Root ---

const App = () => {
  return (
    <HashRouter>
      <Layout>
        <Routes>
          <Route path="/" element={<HomePage />} />
          <Route path="/:slug" element={<GenericPage />} />
        </Routes>
      </Layout>
    </HashRouter>
  );
};

export default App;
